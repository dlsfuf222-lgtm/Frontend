# 📘 Lodash vs 자바스크립트 내장[Built-in] 메서드 + 성능 이슈

---

## ✅ 1. Lodash란?

> Lodash는 자바스크립트의 배열, 객체, 함수 등 다양한 유틸리티 기능을 제공하는 인기 라이브러리입니다.

### 📦 설치

```bash
npm install lodash
```

```javascript
import _ from "lodash";
```

---

## 🔍 2. 기본 기능 비교

| 작업     | JS 내장 메서드                           | Lodash             |
| ------ | ----------------------------------- | ------------------ |
| 배열 필터링 | `arr.filter()`                      | `_.filter()`       |
| 정렬     | `arr.sort()` + 커스텀 함수               | `_.orderBy()`      |
| 검색     | `arr.find()`                        | `_.find()`         |
| 중복 제거  | `new Set(arr)`                      | `_.uniq(arr)`      |
| 깊은 복사  | `structuredClone(obj)` (또는 JSON 방식) | `_.cloneDeep(obj)` |

---

## 📑 3. 정렬 비교 예시

### 🟩 자바스크립트 내장

```javascript
const sorted = [...users].sort((a, b) => a.age - b.age);
```

### 🟦 Lodash `orderBy`

```javascript
const sorted = _.orderBy(users, ["age"], ["asc"]);
```

### ✅ 장단점 비교

| 항목    | 내장 sort()          | Lodash orderBy() |
| ----- | ------------------ | ---------------- |
| 다중 정렬 | 복잡한 if문 필요         | 배열로 키와 방향 전달     |
| 안정성   | ES2020 이후 안정 정렬 보장 | 항상 안정 정렬         |
| 가독성   | 낮음 (중첩 로직 필요)      | 높음 (선언형 방식)      |

---

## 🔬 4. 성능 비교 (간단 벤치마크)

```javascript
const items = Array.from({ length: 100_000 }, (_, i) => ({ id: i, age: Math.random() * 100 }));

console.time("native");
items.slice().sort((a, b) => a.age - b.age);
console.timeEnd("native");

console.time("lodash");
_.orderBy(items, ["age"], ["asc"]);
console.timeEnd("lodash");
```

📌 일반적으로는 **내장 sort가 더 빠릅니다**. Lodash는 다소 느릴 수 있습니다:

| 연산            | 평균 시간 (ms) |
| ------------- | ---------- |
| `sort()`      | \~12ms     |
| `_.orderBy()` | \~20–30ms  |

> Lodash는 내부적으로 `map → sort → map` 3단계 파이프라인을 사용하기 때문입니다.

---

## 🧠 5. 실무 선택 전략

| 상황               | 추천 방식                     |
| ---------------- | ------------------------- |
| 간단한 정렬/필터링       | ✅ 내장 `sort()`, `filter()` |
| 다중 키 정렬          | ✅ Lodash `_.orderBy()`    |
| 대규모 데이터          | ✅ 내장 + 커스텀 비교 함수          |
| 클린코드/가독성 중시      | ✅ Lodash                  |
| 브라우저 호환 고려 (구버전) | ✅ Lodash 사용 가능            |
| 번들 사이즈 민감 (SPA)  | Lodash 사용 주의 (트리셰이킹 권장)   |

---

## 🧪 6. Lodash의 체이닝 vs 내장 체이닝

```javascript
// Lodash
const result = _(users)
  .filter(u => u.age > 20)
  .orderBy("name")
  .value();

// JS
const result = users
  .filter(u => u.age > 20)
  .sort((a, b) => a.name.localeCompare(b.name));
```

* Lodash는 `.value()`를 마지막에 호출해야 결과를 얻을 수 있음.
* 내장 메서드는 체이닝이 자연스럽고 더 직관적.

---

## 🧪 7. 깊은 복사 비교

```javascript
// JS
const copy = JSON.parse(JSON.stringify(obj)); // 함수, Date 손실

// Lodash
const copy = _.cloneDeep(obj); // 정확하게 복사 (순환 참조도 처리)
```

---

## 🛠️ 8. 성능 개선 팁

* **대량 데이터 (10만건 이상)** 처리 시 Lodash는 느릴 수 있음
* 실시간 UX 성능이 중요한 경우 → `sort()`/`filter()` 직접 구현
* **배열 순회를 최소화** → filter 후 sort보다, sort 후 slice 고려
* `memoization`으로 중복 연산 최소화

---

## 📚 마무리 요약

| 구분     | Lodash    | 자바스크립트 내장  |
| ------ | --------- | ---------- |
| 기능 다양성 | ✅ 매우 많음   | ❌ 제한적      |
| 성능     | ❌ 느릴 수 있음 | ✅ 빠름       |
| 가독성    | ✅ 선언형     | ❌ 함수 복잡성   |
| 코드 양   | ✅ 줄어듦     | ❌ 길어질 수 있음 |
| 유지보수   | ✅ 쉬움      | ❌ 실수 유발 여지 |

